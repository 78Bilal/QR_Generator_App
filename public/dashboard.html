<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - QR Kod OluÅŸturucu</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar (Ãœstte SabitlenmiÅŸ) -->
    <nav class="navbar">
        <div class="nav-container">

            <button class="hamburger" id="hamburgerBtn">â˜°</button>

            <div class="nav-title">
            <h1>ğŸ“± QR Kod OluÅŸturucu</h1>
            </div>

            <!-- NAV ACTIONS (Ã–NEMLÄ°) -->
            <div class="nav-actions" id="navActions">

            <!-- KullanÄ±cÄ± MenÃ¼sÃ¼ -->
            <div class="nav-user" id="userMenu" style="display: none;">
                <button id="userPanelBtn" class="username-display btn-user-panel">
                    <span id="username"></span>
                </button>
                <div class="nav-buttons">
                    <a href="/admin" class="btn btn-admin" id="adminLinkBtn" style="display: none;">âš™ï¸ Admin</a>
                    <button id="logoutBtn" class="btn btn-secondary">ğŸ“¤ Ã‡Ä±kÄ±ÅŸ</button>
                </div>
            </div>

            <!-- Guest MenÃ¼ -->
            <div class="nav-guest" id="guestMenu">
                <a href="login.html" class="btn btn-primary-link">ğŸ” GiriÅŸ Yap</a>
                <a href="register.html" class="btn btn-secondary">ğŸ“ KayÄ±t Ol</a>
            </div>

            </div>
        </div>
        </nav>

    <!-- Loading Spinner -->
    <div id="loadingContainer" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <p>LÃ¼tfen bekleyiniz...</p>
                <div class="loading-spinner"></div>
            </div>
        </div>
    </div>

    <!-- Ana Container -->
    <div class="dashboard-container" id="dashboardContainer" style="display: none;">
        <!-- QR OluÅŸturma BÃ¶lÃ¼mÃ¼ -->
        <div class="section">
            <h2>ğŸ”— Yeni QR Kod OluÅŸtur</h2>
            
            <!-- Bilgilendirme MesajÄ± (GiriÅŸ yapÄ±lmamÄ±ÅŸsa) -->
            <div id="guestInfo" class="info-box hidden">
                <p>ğŸ’¡ QR kodlarÄ± giriÅŸ yapmadan da oluÅŸturabilirsiniz. Ancak geÃ§miÅŸ tarayÄ±cÄ± oturumu sona ererse silinir.</p>
                <p><a href="login.html" class="link">ğŸ” GiriÅŸ yaparak</a> QR geÃ§miÅŸinizi kalÄ±cÄ± olarak saklayabilirsiniz.</p>
            </div>
            
            <!-- Hata/BaÅŸarÄ± MesajÄ± -->
            <div id="generateMessage" class="message hidden"></div>

            <!-- Sekme SeÃ§imi -->
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="url-tab">ğŸŒ URL/Metin</button>
                <button class="tab-btn" data-tab="wifi-tab">ğŸ“¶ WiFi QR</button>
            </div>

            <!-- URL/Metin QR Formu -->
            <div id="url-tab" class="tab-content active">
                <form id="qrForm">
                    <div class="form-group">
                        <label for="qrData">QR Kod Verisi</label>
                        <input 
                            type="text" 
                            id="qrData" 
                            name="qrData" 
                            placeholder="URL, metin veya baÅŸka veri girin"
                            required
                        >
                        <small>BaÄŸlantÄ±, metin, telefon numarasÄ± vb. girebilirsiniz</small>
                    </div>
                    <button type="submit" class="btn btn-primary">QR Kod OluÅŸtur</button>
                </form>
            </div>

            <!-- WiFi QR Formu -->
            <div id="wifi-tab" class="tab-content">
                <form id="wifiForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="wifiSSID">ğŸ“¡ WiFi AÄŸÄ± AdÄ± (SSID)</label>
                            <input 
                                type="text" 
                                id="wifiSSID" 
                                name="wifiSSID" 
                                placeholder="Ã¶rn: MyWiFi"
                                required
                            >
                        </div>
                        <div class="form-group">
                            <label for="wifiPassword">ğŸ” WiFi Åifresi</label>
                            <input 
                                type="password" 
                                id="wifiPassword" 
                                name="wifiPassword" 
                                placeholder="WiFi ÅŸifrenizi girin"
                            >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="wifiSecurity">ğŸ›¡ï¸ GÃ¼venlik TÃ¼rÃ¼</label>
                        <select id="wifiSecurity" name="wifiSecurity" required>
                            <option value="WPA">WPA/WPA2</option>
                            <option value="WEP">WEP</option>
                            <option value="nopass">AÃ§Ä±k AÄŸ (Åifresiz)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">WiFi QR Kodu OluÅŸtur</button>
                </form>
            </div>

            <!-- OluÅŸturulan QR Kod GÃ¶sterimi -->
            <div id="qrResult" class="qr-result hidden">
                <div class="qr-display">
                    <img id="qrImage" src="" alt="QR Kod">
                </div>
                <div class="qr-actions">
                    <button id="downloadBtn" class="btn btn-success">â¬‡ï¸ Ä°ndir</button>
                    <button id="clearBtn" class="btn btn-secondary">Temizle</button>
                </div>
            </div>
        </div>

        <!-- QR Kod GeÃ§miÅŸi BÃ¶lÃ¼mÃ¼ -->
        <div class="section">
            <h2>ğŸ“‹ QR Kod GeÃ§miÅŸi</h2>
            
            <!-- Ãœyeli KullanÄ±cÄ± GeÃ§miÅŸi (DB'den) -->
            <div id="memberQRHistory" class="qr-history" style="display: none;"></div>
            
            <!-- Ãœyesiz KullanÄ±cÄ± GeÃ§miÅŸi (SessionStorage'dan) -->
            <div id="guestQRHistory" class="qr-history" style="display: none;"></div>
            
            <!-- GeÃ§miÅŸ Yok MesajÄ± -->
            <div id="noHistoryMessage" class="empty-state">
                <p>ğŸ“­ HenÃ¼z QR kod oluÅŸturmadÄ±nÄ±z</p>
                <small>YukarÄ±daki formu kullanarak ilk QR kodunuzu oluÅŸturun</small>
            </div>
        </div>
    </div>

    <!-- ===== KULLANICI PANELÄ° MODAL ===== -->
    <div id="userPanelModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content user-panel">
            <div class="modal-header">
                <h2>ğŸ‘¤ KullanÄ±cÄ± HesabÄ±m</h2>
                <button class="modal-close" id="closePanelBtn">&times;</button>
            </div>
            
            <div class="user-panel-body">
                <!-- KullanÄ±cÄ± Bilgileri -->
                <div class="panel-section">
                    <h3>Hesap Bilgileri</h3>
                    <div class="info-item">
                        <label>KullanÄ±cÄ± AdÄ±:</label>
                        <span id="panelUsername"></span>
                    </div>
                    <div class="info-item">
                        <label>E-posta:</label>
                        <span id="panelEmail"></span>
                    </div>
                </div>

                <!-- Eylemler -->
                <div class="panel-actions">
                    <button id="changePasswordBtn" class="btn btn-primary btn-full">ğŸ” Åifre DeÄŸiÅŸtir</button>
                    <button id="deleteAccountPanelBtn" class="btn btn-danger btn-full">ğŸ—‘ï¸ Hesap Sil</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== ÅÄ°FRE DEÄÄ°ÅTÄ°R MODAL ===== -->
    <div id="changePasswordModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content password-modal">
            <div class="modal-header">
                <h2>ğŸ” Åifre DeÄŸiÅŸtir</h2>
                <button class="modal-close" id="closePasswordBtn">&times;</button>
            </div>
            
            <form id="changePasswordForm" class="modal-form">
                <div class="form-group">
                    <label for="currentPassword">Mevcut Åifre</label>
                    <input 
                        type="password" 
                        id="currentPassword" 
                        placeholder="Mevcut ÅŸifrenizi girin"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="newPassword">Yeni Åifre</label>
                    <input 
                        type="password" 
                        id="newPassword" 
                        placeholder="Yeni ÅŸifre (en az 6 karakter)"
                        required
                    >
                    <small>En az 6 karakter olmalÄ±dÄ±r</small>
                </div>

                <div class="form-group">
                    <label for="newPasswordConfirm">Yeni Åifre (Tekrar)</label>
                    <input 
                        type="password" 
                        id="newPasswordConfirm" 
                        placeholder="Yeni ÅŸifrenizi tekrar girin"
                        required
                    >
                </div>

                <div id="passwordMessage" class="message hidden"></div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelPasswordBtn">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Åifre DeÄŸiÅŸtir</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== HESAP SÄ°L ONAY MODAL ===== -->
    <div id="deleteConfirmModal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content delete-confirm">
            <div class="modal-header">
                <h2>âš ï¸ Hesap Silme OnayÄ±</h2>
                <button class="modal-close" id="closeDeleteBtn">&times;</button>
            </div>
            
            <div class="modal-body">
                <p class="warning-text">
                    âš ï¸ <strong>Dikkat!</strong> HesabÄ±nÄ±zÄ± silmek <strong>geri alÄ±namaz</strong>.
                </p>
                <ul class="delete-info">
                    <li>TÃ¼m hesap bilgileriniz silinecek</li>
                    <li>TÃ¼m QR kodlarÄ±nÄ±z silinecek</li>
                    <li>Bu iÅŸlem geri alÄ±namaz</li>
                </ul>
                <p>Devam etmek istiyor musunuz?</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">Ä°ptal</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Evet, HesabÄ±mÄ± Sil</button>
            </div>
        </div>
    </div>

    <!-- JavaScript dosyasÄ±nÄ± yÃ¼kle -->
    <script src="script.js"></script>
</body>
</html>
